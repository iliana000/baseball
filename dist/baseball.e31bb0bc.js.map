{"version":3,"sources":["node_modules/koji-tools/tools/wrapConsole.js","node_modules/ansi-colors-and-styles/index.js","node_modules/koji-tools/tools/readDirectory.js","node_modules/process/browser.js","node_modules/koji-tools/tools/findRootDirectory.js","node_modules/koji-tools/tools/buildConfig.js","node_modules/koji-tools/tools/buildRoutes.js","node_modules/koji-tools/tools/request.js","node_modules/koji-tools/refresh.js","node_modules/koji-tools/watch.js","node_modules/koji-tools/config.json","node_modules/koji-tools/index.js","game/helpers/animationframe.js","node_modules/audio-context/index.js","node_modules/audio-loader/lib/base64.js","node_modules/is-buffer/index.js","node_modules/audio-loader/lib/load.js","node_modules/audio-loader/lib/browser.js","node_modules/webfontloader/webfontloader.js","node_modules/game-asset-loader/utils.js","node_modules/game-asset-loader/placeholders.js","node_modules/game-asset-loader/index.js","node_modules/is-audio-buffer/index.js","node_modules/audio-play/browser.js","node_modules/unlock-audio-context/index.js","node_modules/prevent-parent/index.js","game/helpers/utils.js","game/objects/image.js","game/objects/sprite.js","game/objects/imageSprite.js","game/characters/player.js","game/characters/ball.js","game/main.js","game/overlay.js","index.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","readDirectory","require","findRootDirectory","fs","projectConfig","pages","routes","root","filter","path","endsWith","includes","forEach","file","JSON","parse","readFileSync","Object","keys","key","isArray","assign","backend","route","err","serviceMap","reduce","acc","cur","startsWith","replace","toLowerCase","stringify","wrapConsole","buildConfig","buildRoutes","request","watch","global","kojiCallbacks","pwaInstall","pageLoad","options","window","addEventListener","data","action","scope","value","payload","temp","localStorage","getItem","config","setItem","callEvent","sw","register","preventDefault","getConfig","event","callback","params","pwa","pwaPrompt","prompt","resolveSecret","parsedSecrets","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","createBase64Image","dataUri","map","uri","image","Image","src","img","blankImage","defaultImage","loadList","list","progress","percent","loaded","prm","then","asset","Math","floor","type","Promise","all","assets","collection","collectionIncludes","loadImage","url","opts","resolve","reject","optional","join","onload","decode","catch","console","error","onerror","loadSound","result","sound","audioCtx","createBuffer","loadFont","fontName","fallback","WebFont","load","google","families","fontactive","familyName","fontinactive","device","isMobile","test","navigator","userAgent","iOS","unlockAudio","currentDevice","called","state","document","resume","preventParent","preventedKeysList","code","stopPropagation","throttled","delay","fn","lastCall","now","Date","getTime","boundBy","n","upper","lower","hashCode","str","base","split","a","b","charCodeAt","num","abs","toString","h","ctx","x","y","width","height","xPosition","yPosition","drawImage","Sprite","speed","direction","bounds","px","py","cx","cy","vx","vy","radius","top","right","bottom","left","setBounds","m","dx","dy","inBoundsX","setX","snapTo","inBoundsY","setY","ImageSprite","save","scaleX","trX","translate","scale","restore","Player","color","score","Ball","launched","offset","totalOffset","stop","entities","find","ent","collidesWith","entity","distanceX","onY","Game","canvas","overlay","topbar","prefix","settings","getContext","playlist","frame","count","time","rate","current","prev","paused","muted","input","active","keyboard","up","down","mouse","click","touch","input2","images","sounds","fonts","handleKeyboardInput","clientY","handleMouseMove","touches","handleTouchMove","target","handleClicks","handleResize","Koji","log","cancelFrame","gameTopBar","style","display","backgroundColor","colors","primaryColor","innerWidth","innerHeight","clientHeight","screen","centerX","centerY","querySelector","textColor","setState","winScore","parseInt","setStyles","gameAssets","backgroundImage","ballImage","player1Image","player2Image","bounceSound","scoreSound","backgroundMusic","fontFamily","getElementById","textContent","create","playerHeight","playerWidth","pHeight","pWidth","player1","player2","ballSpeed","ballSize","ballWidth","ballHeight","ball","background","play","fillRect","draw","setScore1","setScore2","hideLoading","opacity","setBanner","setButton","startText","showStats","setMute","setPause","setInstructions","desktop","instructionsDesktop","mobile","instructionsMobile","hideBanner","hideButton","hideInstructions","start","end","duration","loop","context","dy1","move","offsetTop","diffY","dy2","difficulty","speedLimit","dy2capped","onEdgeY","collided","collisionsWith","player1WinText","player2WinText","requestFrame","side","launch","id","mute","pause","onSide","relaunchBall","location","reload","rightSide","suspend","hide","audioBuffer","random","slice","playback","s","targetBuffer","next","resumed","Overlay","node","container","loading","banner","button","instructions","score1","score2","styles","show","message","innerHTML","applyStyles","visibility","gameScreen","gameOverlay","game","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","close","onclose","removeErrorOverlay","stack","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","getParents","modules","parents","k","d","dep","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClBA;AACA,IAAIA,OAAO,GAAGC,MAAM,CAACC,OAAP,GAAiB,EAA/B,EAEA;AACA;AACA;AACA;;AAEA,IAAIC,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;AACxB,QAAM,IAAIC,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,SAASC,mBAAT,GAAgC;AAC5B,QAAM,IAAID,KAAJ,CAAU,mCAAV,CAAN;AACH;;AACA,aAAY;AACT,MAAI;AACA,QAAI,OAAOE,UAAP,KAAsB,UAA1B,EAAsC;AAClCL,MAAAA,gBAAgB,GAAGK,UAAnB;AACH,KAFD,MAEO;AACHL,MAAAA,gBAAgB,GAAGE,gBAAnB;AACH;AACJ,GAND,CAME,OAAOI,CAAP,EAAU;AACRN,IAAAA,gBAAgB,GAAGE,gBAAnB;AACH;;AACD,MAAI;AACA,QAAI,OAAOK,YAAP,KAAwB,UAA5B,EAAwC;AACpCN,MAAAA,kBAAkB,GAAGM,YAArB;AACH,KAFD,MAEO;AACHN,MAAAA,kBAAkB,GAAGG,mBAArB;AACH;AACJ,GAND,CAME,OAAOE,CAAP,EAAU;AACRL,IAAAA,kBAAkB,GAAGG,mBAArB;AACH;AACJ,CAnBA,GAAD;;AAoBA,SAASI,UAAT,CAAoBC,GAApB,EAAyB;AACrB,MAAIT,gBAAgB,K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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3NA;;AAEA,IAAI6B,WAAW,GAAGhC,OAAO,CAAC,wBAAD,CAAzB;;AACA,IAAIiC,WAAW,GAAGjC,OAAO,CAAC,wBAAD,CAAzB;;AACA,IAAIkC,WAAW,GAAGlC,OAAO,CAAC,wBAAD,CAAzB,EACA;;;AACA,IAAImC,OAAO,GAAGnC,OAAO,CAAC,oBAAD,CAArB;;AACA,IAAIoC,KAAK,GAAGpC,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAG,CAACqC,MAAM,CAACC,aAAX,EAA0BD,MAAM,CAACC,aAAP;AAC1B,IAAG,CAACD,MAAM,CAACE,UAAX,EAAuBF,MAAM,CAACE,UAAP;;AAEvB,SAASC,QAAT,CAAkBC,OAAlB,EAA2B;AACvB,MAAG,kBAAyB,YAA5B,EAA0C;AACtCT,IAAAA,WAAW;AAEXU,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAc;AAC7C;AACA,UAAIA,IAAI,CAACC,MAAL,KAAgB,cAApB,EAAoC;AAChC,cAAM;AAAEC,UAAAA,KAAF;AAAS5B,UAAAA,GAAT;AAAc6B,UAAAA;AAAd,YAAwBH,IAAI,CAACI,OAAnC;AACA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B,GAAGzB,MAAM,CAACyB,qBAAP,IAAgCzB,MAAM,CAAC0B,wBAAvC,IACxB1B,MAAM,CAAC2B,2BADiB,IACc3B,MAAM,CAAC4B,uBADnD;;AAEA,IAAMC,oBAAoB,GAAG7B,MAAM,CAAC6B,oBAAP,IAA+B7B,MAAM,CAAC8B,uBAAnE;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACjBA;AACA,MAAMC,iBAAiB,GAAIC,OAAD,IAAa;AACnC,SAAO,CAACA,OAAD,EACNC,GADM,CACFC,GAAG,IAAI;AACR,QAAIC,KAAK,GAAG,IAAIC,KAAJ,EAAZ;AACAD,IAAAA,KAAK,CAACE,GAAN,GAAYH,GAAZ;AACA,WAAOC,KAAP;AACH,GALM,EAKJpD,MALI,CAKGuD,GAAG,IAAIA,GALV,CAAP;AAMH,CAPD;;;;;;;;;;;ACDA;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAI,oHAApB,EAEA;AACA;;;AACA,MAAMC,YAAY,GAAI;;;;;;;;;aAAtB;;;;;;;;;;AC8BA;;AACA;;AACA;;AAEA;;AACA;;;;AA3DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,MAAMC,QAAQ,GAAG,CAACC,IAAD,EAAOC,QAAP,KAAoB;AACjC;AACA,MAAIlH,CAAC,GAAG,CAAR;AACAkH,EAAAA,QAAQ,CAAC;AAAEC,IAAAA,OA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AAEhB,MAAAA,OAAO,CAAC;AACrBT,QAAAA,IAAI,EAAE,MADe;AAErB3E,QAAAA,GAAG,EAAEA,GAFgB;AAGrB6B,QAAAA,KAAK,EAAEwE,QAAQ,IAAI;AAHE,OAAD,CAAP;AAId;;AAEHC,2BAAQC,IAAR,CAAa;AACTC,MAAAA,MAAM,EAAE;AACJC,QAAAA,QAAQ,EAAE,CAACL,QAAD;AADN,OADC;AAITM,MAAAA,UAAU,EAAEC,UAAU,IAAI;AACtBvB,QAAAA,OAAO,CAAC;AACJT,UAAAA,IAAI,EAAE,MADF;AAEJ3E,UAAAA,GAAG,EAAEA,GAFD;AAGJ6B,UAAAA,KAAK,EAAE8E;AAHH,SAAD,CAAP;AAKH,OAVQ;AAWTC,MAAAA,YAAY,EAAE,MAAM;AAChBxB,QAAAA,OAAO,CAAC;AACJT,UAAAA,IAAI,EAAE,MADF;AAEJ3E,UAAAA,GAAG,EAAEA,GAFD;AAGJ6B,UAAAA,KAAK,EAAEwE,QAAQ,IAAI;AAHf,SAAD,CAAP;AAKH;AAjBQ,KAAb;AAmBH,GA/BM,CAAP;AAgCH,CAjCD;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"baseball.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/**\n * koji_utilities/wrapConsole.js\n * \n * What it Does:\n *   This utility wraps around the normal console.log() function\n *   in order to allow koji to display the logs from your app in\n *   the embedded preview within your editor. \n * \n * What to Change:\n *   This file is fairly complicated and deals with internal koji\n *   schemas about how to handle iframe postMessage's, so changing\n *   around how this works is not advisable.\n * \n * How to Use:\n *   Import this file and run it as a function once your component\n *   has mounted, see common/App.js to see an implementation. This\n *   is already done for you in this project so don't worry about it.\n */\n\n\"use strict\";\n\nmodule.exports = () => {\n  // Outgoing\n  window.__originalConsole = {\n    log: console.log.bind(console),\n    info: console.info.bind(console),\n    warn: console.warn.bind(console),\n    error: console.error.bind(console),\n  };\n\n  try {\n    const consoleOverrides = {\n      // ...console,\n      log: (...args) => {\n        window.__originalConsole.log.apply(this, args);\n        if (window.parent) {\n            try {\n              window.parent.postMessage({\n                  action: 'log',\n                  payload: { args },\n              }, '*');\n            } catch (err) {\n                //\n            }\n        }\n      },\n      info: (...args) => {\n        window.__originalConsole.info.apply(this, args);\n        if (window.parent) {\n          try {\n              window.parent.postMessage({\n                  action: 'info',\n                  payload: { args },\n              }, '*');\n            } catch (err) {\n                //\n            }\n        }\n      },\n      warn: (...args) => {\n        window.__originalConsole.warn.apply(this, args);\n        if (window.parent) {\n          try {\n              window.parent.postMessage({\n                  action: 'warn',\n                  payload: { args },\n              }, '*');\n            } catch (err) {\n                //\n            }\n        }\n      },\n      error: (...args) => {\n        window.__originalConsole.error.apply(this, args);\n        if (window.parent) {\n            try {\n              window.parent.postMessage({\n                  action: 'error',\n                  payload: { args },\n              }, '*');\n            } catch (err) {\n                //\n            }\n        }\n      },\n    };\n    console = consoleOverrides;\n  } catch (err) {\n    //\n  }\n\n  // Wrap error\n  window.onerror = (message, source, lineNumber) => {\n      if (window.parent) {\n          window.parent.postMessage({\n              action: 'error',\n              payload: {\n                  args: [\n                    message,\n                    `In file: ${source}`,\n                    `Line: ${lineNumber}`,\n                  ],\n              }\n          }, '*');\n      }\n  };\n};\n","/**\r\n * @author <a href=\"https://mirismaili.github.io\">S. Mahdi Mir-Ismaili</a>.\r\n * Created on 1397/12/26 (2019/3/17).\r\n *\r\n * See: https://en.wikipedia.org/wiki/ANSI_escape_code\r\n */\r\n\r\n// Colors and styles by [bodi0](https://stackoverflow.com/users/632524/bodi0):\r\n//      https://stackoverflow.com/a/41407246/5318303\r\n\r\nconst RESET      =  '\\x1b[0m';\r\nconst BRIGHT     =  '\\x1b[1m';\r\nconst DIM        =  '\\x1b[2m';\r\nconst UNDERSCORE =  '\\x1b[4m';\r\nconst BLINK      =  '\\x1b[5m';\r\nconst REVERSE    =  '\\x1b[7m';\r\nconst HIDDEN     =  '\\x1b[8m';\r\n\r\nconst FG_BLACK   = '\\x1b[30m';\r\nconst FG_RED     = '\\x1b[31m';\r\nconst FG_GREEN   = '\\x1b[32m';\r\nconst FG_YELLOW  = '\\x1b[33m';\r\nconst FG_BLUE    = '\\x1b[34m';\r\nconst FG_MAGENTA = '\\x1b[35m';\r\nconst FG_CYAN    = '\\x1b[36m';\r\nconst FG_WHITE   = '\\x1b[37m';\r\n\r\nconst BG_BLACK   = '\\x1b[40m';\r\nconst BG_RED     = '\\x1b[41m';\r\nconst BG_GREEN   = '\\x1b[42m';\r\nconst BG_YELLOW  = '\\x1b[43m';\r\nconst BG_BLUE    = '\\x1b[44m';\r\nconst BG_MAGENTA = '\\x1b[45m';\r\nconst BG_CYAN    = '\\x1b[46m';\r\nconst BG_WHITE   = '\\x1b[47m';\r\n//------------------------------------------------------------------/\r\n\r\nmodule.exports = {\r\n\tRESET      : RESET,\r\n\tBRIGHT     : BRIGHT,\r\n\tDIM        : DIM,\r\n\tUNDERSCORE : UNDERSCORE,\r\n\tBLINK      : BLINK,\r\n\tREVERSE    : REVERSE,\r\n\tHIDDEN     : HIDDEN,\r\n\r\n\tFG_BLACK   : FG_BLACK,\r\n\tFG_RED     : FG_RED,\r\n\tFG_GREEN   : FG_GREEN,\r\n\tFG_YELLOW  : FG_YELLOW,\r\n\tFG_BLUE    : FG_BLUE,\r\n\tFG_MAGENTA : FG_MAGENTA,\r\n\tFG_CYAN    : FG_CYAN,\r\n\tFG_WHITE   : FG_WHITE,\r\n\r\n\tBG_BLACK   : BG_BLACK,\r\n\tBG_RED     : BG_RED,\r\n\tBG_GREEN   : BG_GREEN,\r\n\tBG_YELLOW  : BG_YELLOW,\r\n\tBG_BLUE    : BG_BLUE,\r\n\tBG_MAGENTA : BG_MAGENTA,\r\n\tBG_CYAN    : BG_CYAN,\r\n\tBG_WHITE   : BG_WHITE,\r\n    //------------------------------------------------------------------/\r\n\r\n\tT   : RESET,\r\n\tRS  : RESET,\r\n\tRT  : RESET,\r\n\tRST : RESET,\r\n\r\n\tB    : BRIGHT,\r\n\tBD   : BRIGHT,\r\n\tBR   : BRIGHT,\r\n\tBLD  : BRIGHT,\r\n\tBRT  : BRIGHT,\r\n\tBOLD : BRIGHT,\r\n\r\n\tI   : DIM,\r\n\tDM  : DIM,\r\n    //DIM : DIM,\r\n\r\n\tU         : UNDERSCORE,\r\n\tUL        : UNDERSCORE,\r\n\tUS        : UNDERSCORE,\r\n\tUNL       : UNDERSCORE,\r\n\tUNS       : UNDERSCORE,\r\n\tUNDERLINE : UNDERSCORE,\r\n\r\n\tN   : BLINK,\r\n\tBN  : BLINK,\r\n\tBNK : BLINK,\r\n\r\n\tV   : REVERSE,\r\n\tRV  : REVERSE,\r\n\tRVR : REVERSE,\r\n\r\n\tH   : HIDDEN,\r\n\tHN  : HIDDEN,\r\n\tHDN : HIDDEN,\r\n    //------------------------------------------------------------------/\r\n\r\n\tK       : FG_BLACK,\r\n\tBK      : FG_BLACK,\r\n\tBLK     : FG_BLACK,\r\n\tBLACK   : FG_BLACK,\r\n\r\n\tR       : FG_RED,\r\n\tRD      : FG_RED,\r\n\tRED     : FG_RED,\r\n\r\n\tG       : FG_GREEN,\r\n\tGR      : FG_GREEN,\r\n\tGRN     : FG_GREEN,\r\n\tGREEN   : FG_GREEN,\r\n\r\n\tY       : FG_YELLOW,\r\n\tYL      : FG_YELLOW,\r\n\tYLW     : FG_YELLOW,\r\n\tYELLOW  : FG_YELLOW,\r\n\r\n\tE       : FG_BLUE,\r\n\tBL      : FG_BLUE,\r\n\tBLU     : FG_BLUE,\r\n\tBLUE    : FG_BLUE,\r\n\r\n\tM       : FG_MAGENTA,\r\n\tMG      : FG_MAGENTA,\r\n\tMGN     : FG_MAGENTA,\r\n\tMAGENTA : FG_MAGENTA,\r\n\r\n\tC       : FG_CYAN,\r\n\tCN      : FG_CYAN,\r\n\tCYN     : FG_CYAN,\r\n\tCYAN    : FG_CYAN,\r\n\r\n\tW       : FG_WHITE,\r\n\tWT      : FG_WHITE,\r\n\tWHT     : FG_WHITE,\r\n\tWHITE   : FG_WHITE,\r\n    //------------------------------------------------------------------/\r\n\r\n\t_K       : BG_BLACK,\r\n\t_BK      : BG_BLACK,\r\n\t_BLK     : BG_BLACK,\r\n\t_BLACK   : BG_BLACK,\r\n\r\n\t_R       : BG_RED,\r\n\t_RD      : BG_RED,\r\n\t_RED     : BG_RED,\r\n\r\n\t_G       : BG_GREEN,\r\n\t_GR      : BG_GREEN,\r\n\t_GRN     : BG_GREEN,\r\n\t_GREEN   : BG_GREEN,\r\n\r\n\t_Y       : BG_YELLOW,\r\n\t_YL      : BG_YELLOW,\r\n\t_YLW     : BG_YELLOW,\r\n\t_YELLOW  : BG_YELLOW,\r\n\r\n\t_E       : BG_BLUE,\r\n\t_BL      : BG_BLUE,\r\n\t_BLU     : BG_BLUE,\r\n\t_BLUE    : BG_BLUE,\r\n\r\n\t_M       : BG_MAGENTA,\r\n\t_MG      : BG_MAGENTA,\r\n\t_MGN     : BG_MAGENTA,\r\n\t_MAGENTA : BG_MAGENTA,\r\n\r\n\t_C       : BG_CYAN,\r\n\t_CN      : BG_CYAN,\r\n\t_CYN     : BG_CYAN,\r\n\t_CYAN    : BG_CYAN,\r\n\r\n\t_W       : BG_WHITE,\r\n\t_WT      : BG_WHITE,\r\n\t_WHT     : BG_WHITE,\r\n\t_WHITE   : BG_WHITE,\r\n};\r\n","const {execSync} = require('child_process')\nconst {_YLW, RED, RST} = require('ansi-colors-and-styles')\nconst path = require('path')\n\n// Get all git-indexed paths to find koji files\nmodule.exports = directory => {\n   try {\n      return execSync('git ls-files', {cwd: directory}).toString()\n            .replace(/\\n$/, '')\n            .split('\\n')\n            .map(relativePath => path.resolve(directory, relativePath))\n   } catch (error) {\n      throw Error(error.message +\n            `${_YLW}${RED}Have you installed \"git\" and added it to the \"PATH\"? If no see: ` +\n            `https://git-scm.com/book/en/v2/Getting-Started-Installing-Git${RST}\\n`\n      )\n   }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","const fs = require('fs')\nconst path = require('path')\n\nmodule.exports = () => {\n    // puts us in the directory where this is a node module of.\n    let dirPath = process.cwd()\n    \n    // keep walking down the street.\n    try {\n        while (!fs.readdirSync(dirPath).includes('.koji')) {\n            const parentPath = path.dirname(dirPath)\n            if (dirPath === parentPath) // noinspection ExceptionCaughtLocallyJS\n                throw Error(`Couldn't find \".koji\" folder.`)\n            dirPath = parentPath\n        }\n    } catch (err) {\n        // give up and do a standard config\n        dirPath = process.cwd()\n        console.log(`Couldn't find \".koji\" folder. Default path was used: \"${dirPath}\"`)\n    }\n    \n    return dirPath\n}\n","/**\n * buildConfig.js\n * \n * What it does:\n *   This file takes all of the customization json files and wraps them\n *   into a single json string. It also packages route and page information\n *   from the backend and frontend directories.\n * \n * Things to edit:\n *   Do not edit this file unless you really know what you're doing.\n *   If you have some complicated customization system that goes\n *   beyond what already exists you might have to change this\n *   file to include the customizations.\n */\n\nconst readDirectory = require('./readDirectory.js');\nconst findRootDirectory = require('./findRootDirectory.js');\n\nconst fs = require('fs');\n\nmodule.exports = () => {\n  let projectConfig = {\n    pages: [],\n    routes: [],\n  };\n  let root = findRootDirectory();\n  readDirectory(root)\n    .filter(path => (path.endsWith('koji.json') || path.includes('.koji')) && !path.includes('.koji-resources'))\n    .forEach((path) => {\n      try {\n        const file = JSON.parse(fs.readFileSync(path, 'utf8'));\n\n        Object.keys(file).forEach((key) => {\n          // If the key already exists in the project config, use it\n          if (projectConfig[key]) {\n            if (Array.isArray(projectConfig[key]) && Array.isArray(file[key])) {\n                projectConfig[key] = projectConfig[key].concat(file[key]);\n            } else {\n                projectConfig[key] = Object.assign(projectConfig[key], file[key]);\n            }\n          } else {\n            // Otherwise, set it\n            projectConfig[key] = file[key];\n          }\n        });\n\n        // Create a map of backend routes by name\n        projectConfig.backend = {};\n        if (projectConfig.routes) {\n            projectConfig.routes.forEach(({ name, route }) => {\n                projectConfig.backend[name] = `${process.env.KOJI_BACKEND_URL}${route}`;\n            });\n        }\n      } catch (err) {\n        //\n      }\n    });\n\n  projectConfig.serviceMap = Object.keys(process.env).reduce((acc, cur) => {\n    if (cur.startsWith('KOJI_SERVICE_URL')) {\n      acc[cur.replace('KOJI_SERVICE_URL_', '').toLowerCase()] = process.env[cur];\n    }\n    return acc;\n  }, {});\n\n  return JSON.stringify(projectConfig);\n}\n","/**\n * koji_utilities/routes.js\n * \n * What it Does:\n *   This function takes all of the backend route data and makes it easier to\n *   deal with. For use with koji_utilities/request.js, pass a route from the\n *   array that this file outputs in order to make a request to a backend route\n * \n * Things to Change:\n *   This is a pretty simple utility that doesn't require or allow much customization.\n *   If you want to pass additional data from the koji.json file in your routes to\n *   request.js you can set that up in this file.\n */\n\nmodule.exports = (config) => {\n    let routeConfig = {};\n    const isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (config.backend && config.routes && isBrowser) {\n        const backendHost = window.location.host.replace('frontend', 'backend');\n        routeConfig = config.routes.reduce((acc, { name, route, method, cache }) => {\n            acc[name] = {\n                url: config.backend[name],\n                method,\n                cache,\n            };\n            return acc;\n        }, {});\n    }\n    return routeConfig;\n}","/**\n * koji_utilities/request.js\n * \n * What it Does:\n *   This file provides a simplified way to send requests to the backend server. This is\n *   accomplished by wrapping a few more configuration options into the fetch function.\n *   Requests can be made to backend without this file but it is much easier with it.\n * \n * What to Change:\n *   In Request we provide a very basic version of authorization and pushing a user to\n *   a /login page if they are not logged in. This authorization feature can be changed\n *   around or expanded if its needed. Also if you have any preference for what parameters\n *   should be used in fetch, you can define them here.\n */\n\n// Parse JSON returned by a request\nfunction parseJSON(response) {\n  return response.json();\n}\n\n// Check the status of an HTTP request\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  return response\n    .json()\n    .then(({ error }) => {\n        throw new Error(error || 'api_error');\n    });\n}\n\nfunction wrapFetch(route, params) {\n  let computedRoute = route.url;\n  let cacheOptions = route.cache || 'no-cache';\n  const computedOptions = {\n    method: route.method.toLowerCase(),\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    cache: cacheOptions,\n  };\n\n  // Replace all named parameters in the URL\n  const mutableParams = params || {};\n  Object.keys(mutableParams).forEach((key) => {\n    if (computedRoute.indexOf(`:${key}`) !== -1) {\n      computedRoute = computedRoute.replace(`:${key}`, encodeURIComponent(mutableParams[key]));\n      delete mutableParams[key];\n    }\n  });\n\n  // If it's a GET request, append all other params in the query string.\n  // Otherwise, attach a JSON body to the POST request.\n  if (route.method.toLowerCase() === 'get') {\n    const queryParams = [];\n    Object.keys(mutableParams).forEach((key) => queryParams.push(`${key}=${encodeURIComponent(mutableParams[key])}`));\n\n    if (queryParams.length > 0) {\n      computedRoute += `?${queryParams.join('&')}`;\n    }\n  } else {\n    computedOptions.body = JSON.stringify(mutableParams.body);\n  }\n\n  // Process the request\n  return fetch(computedRoute, computedOptions);\n}\n\n// Process an HTTP request\nmodule.exports = (route, params) => {\n  return wrapFetch(route, params)\n    .then(checkStatus)\n    .then(parseJSON)\n    .catch((err) => {\n      throw err;\n    });\n}\n","var buildConfig = require('./tools/buildConfig.js');\n\nmodule.exports = () => {\n    var fs = require('fs');\n\n    // escape our cached configs so koji editor can't store them\n    var config = JSON.stringify({ config: JSON.parse(buildConfig()) }, null, 2);\n    try {\n        fs.writeFileSync(`${__dirname}/config.json`, config)\n    } catch(err) {\n        console.log(err);\n    }\n    console.log('new config');\n}\n","var buildConfig = require('./tools/buildConfig.js');\nvar readDirectory = require('./tools/readDirectory.js');\nvar refresh = require('./refresh.js');\nvar findRootDirectory = require('./tools/findRootDirectory.js');\n\nmodule.exports = () => {\n    var fs = require('fs');\n    console.log('koji-tools watching');\n    // const props = JSON.parse(refresh());\n    // output what the server wants us to in order to start the preview window\n    // console.log(props.config.develop.frontend.events.built);\n    // NOTE: figure out what to do about this one, because we cant output this before the server is ready...\n \n    // make sure that its in there to start, postinstall has been doing so weird stuff\n    refresh();\n    // watch the .koji directory from a node_modules directory...\n    let root = findRootDirectory();\n    readDirectory(root)\n        .filter(path => (path.endsWith('koji.json') || path.includes('.koji')) && !path.includes('.koji-resources'))\n        .forEach((path) => {\n            console.log('Watching', path);\n            \n            let fsWait = false;\n            fs.access(path, fs.F_OK, (err) => {\n                if (!err) {\n                    fs.watch(path, (eventType, filename) => {\n                        if (fsWait) return;\n                        fsWait = setTimeout(() => {\n                            fsWait = false;\n                        }, 1000);\n                        console.log(eventType, filename);\n                        refresh();\n                    });\n                }\n            });\n        });\n}\n","module.exports = {\n  \"config\": {\n    \"pages\": [],\n    \"routes\": [],\n    \"colors\": {\n      \"textColor\": \"#391a87\",\n      \"rightPaddleColor\": \"#d404b3\",\n      \"leftPaddleColor\": \"#01c4c8\",\n      \"primaryColor\": \"#01c4c8\"\n    },\n    \"@@editor\": [\n      {\n        \"key\": \"colors\",\n        \"name\": \"Colors\",\n        \"icon\": \"💅\",\n        \"source\": \"colors.json\",\n        \"fields\": [\n          {\n            \"key\": \"textColor\",\n            \"name\": \"Text color\",\n            \"description\": \"Default color for text\",\n            \"type\": \"color\"\n          },\n          {\n            \"key\": \"rightPaddleColor\",\n            \"name\": \"Right paddle color\",\n            \"description\": \"Default color for right paddle\",\n            \"type\": \"color\"\n          },\n          {\n            \"key\": \"leftPaddleColor\",\n            \"name\": \"Left paddle color\",\n            \"description\": \"Default color for left paddle\",\n            \"type\": \"color\"\n          },\n          {\n            \"key\": \"primaryColor\",\n            \"name\": \"Primary Color\",\n            \"type\": \"color\"\n          }\n        ]\n      },\n      {\n        \"key\": \"images\",\n        \"name\": \"Images\",\n        \"icon\": \"🖼️\",\n        \"source\": \"images.json\",\n        \"fields\": [\n          {\n            \"key\": \"backgroundImage\",\n            \"name\": \"Background Image\",\n            \"description\": \"Background image\",\n            \"type\": \"image\"\n          },\n          {\n            \"key\": \"ballImage\",\n            \"name\": \"Ball Image\",\n            \"description\": \"Ball image\",\n            \"type\": \"image\"\n          },\n          {\n            \"key\": \"player1Image\",\n            \"name\": \"Player1 Image\",\n            \"description\": \"Player1 image\",\n            \"type\": \"image\"\n          },\n          {\n            \"key\": \"player2Image\",\n            \"name\": \"Player2 Image\",\n            \"description\": \"Player2 image\",\n            \"type\": \"image\"\n          }\n        ]\n      },\n      {\n        \"key\": \"settings\",\n        \"name\": \"Game settings\",\n        \"icon\": \"🎮\",\n        \"source\": \"settings.json\",\n        \"fields\": [\n          {\n            \"key\": \"name\",\n            \"name\": \"App name\"\n          },\n          {\n            \"key\": \"startText\",\n            \"name\": \"Start Button Text\"\n          },\n          {\n            \"key\": \"player1WinText\",\n            \"name\": \"Text to show when player 1 wins\"\n          },\n          {\n            \"key\": \"player2WinText\",\n            \"name\": \"Text to show when player 2 wins\"\n          },\n          {\n            \"key\": \"instructionsMobile\",\n            \"name\": \"How to play the game on mobile\"\n          },\n          {\n            \"key\": \"instructionsDesktop\",\n            \"name\": \"How to play the game on desktop\"\n          },\n          {\n            \"key\": \"gameTopBar\",\n            \"name\": \"If game should have a top bar or not\"\n          },\n          {\n            \"key\": \"playerWidth\",\n            \"name\": \"Width of players\"\n          },\n          {\n            \"key\": \"playerHeight\",\n            \"name\": \"Height of players\"\n          },\n          {\n            \"key\": \"ballSize\",\n            \"name\": \"Ball size\"\n          },\n          {\n            \"key\": \"ballSpeed\",\n            \"name\": \"Ball speed\"\n          },\n          {\n            \"key\": \"difficulty\",\n            \"name\": \"Difficulty level\"\n          },\n          {\n            \"key\": \"winScore\",\n            \"name\": \"Score need for player to win game\"\n          },\n          {\n            \"key\": \"fontFamily\",\n            \"name\": \"Font to use for text in the game\"\n          }\n        ]\n      },\n      {\n        \"key\": \"sounds\",\n        \"name\": \"Sounds\",\n        \"icon\": \"🔊️\",\n        \"source\": \"sounds.json\",\n        \"fields\": [\n          {\n            \"key\": \"backgroundMusic\",\n            \"name\": \"Background Music\",\n            \"description\": \"Music to loop in background\",\n            \"type\": \"sound\"\n          },\n          {\n            \"key\": \"bounceSound\",\n            \"name\": \"Bounce Sound\",\n            \"description\": \"Sound to play on bounce\",\n            \"type\": \"sound\"\n          },\n          {\n            \"key\": \"scoreSound\",\n            \"name\": \"Score Sound\",\n            \"description\": \"Sound to play on score\",\n            \"type\": \"sound\"\n          }\n        ]\n      }\n    ],\n    \"backend\": {},\n    \"images\": {\n      \"backgroundImage\": \"https://objects.koji-cdn.com/e46e3eb9-9d82-4ce4-92ca-1470ea5f937f/kyrbo-baseballfield.svg\",\n      \"ballImage\": \"https://images.koji-cdn.com/e46e3eb9-9d82-4ce4-92ca-1470ea5f937f/jzg3w-9f8911eedfc246a684f43eaae9bb25e2.png\",\n      \"player1Image\": \"https://objects.koji-cdn.com/e46e3eb9-9d82-4ce4-92ca-1470ea5f937f/0fsfy-baseballbeat.svg\",\n      \"player2Image\": \"https://images.koji-cdn.com/e46e3eb9-9d82-4ce4-92ca-1470ea5f937f/vafxb-baseballglove.png\"\n    },\n    \"settings\": {\n      \"name\": \"Baseball Catcher\",\n      \"startText\": \"Start\",\n      \"player1WinText\": \"Player 1 Wins!\",\n      \"player2WinText\": \"Player 2 Wins!\",\n      \"instructionsMobile\": \"Tap to launch ball. Swipe up or down to move [ ⇡ ⇣ ]\",\n      \"instructionsDesktop\": \"Player 1: Spacebar to launch. [ ⇡ ⇣ ] to move. Player 2: [ W S ] to move.\",\n      \"gameTopBar\": true,\n      \"playerWidth\": 10,\n      \"playerHeight\": 60,\n      \"ballSize\": 20,\n      \"ballSpeed\": 20,\n      \"difficulty\": 5,\n      \"winScore\": 5,\n      \"fontFamily\": \"Bungee Inline\"\n    },\n    \"sounds\": {\n      \"backgroundMusic\": \"https://objects.koji-cdn.com/346c4884-64f9-4fb5-89b5-8fe031ed672c/pongsynth2.mp3\",\n      \"bounceSound\": \"https://objects.koji-cdn.com/d659a1cd-54ca-41c1-906f-3b7b5f6aeb7d/scoreSound.mp3\",\n      \"scoreSound\": \"https://objects.koji-cdn.com/d659a1cd-54ca-41c1-906f-3b7b5f6aeb7d/winSound.mp3\"\n    },\n    \"deploy\": {\n      \"subdomain\": \".withkoji.com\",\n      \"frontend\": {\n        \"output\": \"dist\",\n        \"commands\": [\n          \"npm install\",\n          \"npm run build\"\n        ],\n        \"injections\": []\n      }\n    },\n    \"develop\": {\n      \"frontend\": {\n        \"path\": \".\",\n        \"port\": 1234,\n        \"events\": {\n          \"started\": \"npm start\",\n          \"building\": \"node config.js\",\n          \"built\": \"Built in\",\n          \"build-error\": \"npm ERR!\"\n        },\n        \"startCommand\": \"npm start\"\n      }\n    },\n    \"serviceMap\": {}\n  }\n};","\"use strict\";\n\nvar wrapConsole = require('./tools/wrapConsole.js');\nvar buildConfig = require('./tools/buildConfig.js');\nvar buildRoutes = require('./tools/buildRoutes.js');\n// var attachVCCTest = require('./tools/vccTest.js');\nvar request = require('./tools/request.js');\nvar watch = require('./watch.js');\n\nif(!global.kojiCallbacks) global.kojiCallbacks;\nif(!global.pwaInstall) global.pwaInstall;\n\nfunction pageLoad(options) {\n    if(process.env.NODE_ENV !== 'production') {\n        wrapConsole();\n\n        window.addEventListener('message', ({ data }) => {\n            // Global context injection\n            if (data.action === 'injectGlobal') {\n                const { scope, key, value } = data.payload;\n                var temp = JSON.parse(window.localStorage.getItem('koji'));\n                temp[scope][key] = value;\n                exports.config[scope][key] = value;\n                exports.routes = buildRoutes(exports.config);\n                window.localStorage.setItem('koji', JSON.stringify(temp));\n\n                // update our hooks for an onchange event.\n                callEvent('change', [scope, key, value]);\n            }\n        }, false);\n        \n        //\n        // attachVCCTest(getConfig());\n    } else {\n        // attempt to load a service worker...?\n        const sw = require('./serviceWorker.js');\n        sw.register();\n\n        window.addEventListener('beforeinstallprompt', (e) => {\n\n            e.preventDefault();\n            global.pwaInstall = e;\n\n            callEvent('pwaPromptReady');\n        });\n    }\n\n    window.localStorage.setItem('koji', JSON.stringify(getConfig()));\n    exports.config = getConfig();\n    exports.routes = buildRoutes(exports.config);\n}\n\nfunction getConfig() {\n    return require('./config.json').config;\n}\n\nfunction on(event, callback) {\n    if(!global.kojiCallbacks) global.kojiCallbacks = {};\n    if(!global.kojiCallbacks[event]) global.kojiCallbacks[event] = [];\n    global.kojiCallbacks[event].push(callback);\n}\n\nfunction callEvent(event, params) {\n    if(global.kojiCallbacks && global.kojiCallbacks[event]) {\n        global.kojiCallbacks[event].forEach((callback) => callback.apply(null, params));\n    }\n}\n\nexports.config = getConfig();\nexports.routes = buildRoutes(exports.config);\nexports.pageLoad = pageLoad;\nexports.watch = watch;\nexports.request = request;\nexports.on = on;\nexports.pwa = global.pwaInstall;\nexports.pwaPrompt = () => global.pwaInstall.prompt();\n\nexports.resolveSecret = (key) => {\n    if (!process || !process.env || !process.env.KOJI_SECRETS) {\n        return null;\n    }\n    try {\n        const parsedSecrets = JSON.parse(process.env.KOJI_SECRETS);\n        return parsedSecrets[key] || null;\n    } catch (err) {\n        //\n    }\n    return null;\n}\n","/**\r\n * game/helpers/animationframe.js\r\n * \r\n * What it Does:\r\n *   This file exports requestAnimationFrame and cancelAnimationFrame\r\n *   for the major browsers\r\n * \r\n *   requestAnimationFrame: takes a function we want to run.\r\n *   in the case of this game play() runs the function when the browser is ready\r\n *   and returns an integer representing the times it has been called.\r\n *   this way the game can keep track of frames and not continue calling play()\r\n *   when the browser is not in focus. The browser allows a new frame about every 60 seconds.\r\n * \r\n *   checkout the requestFrame method in game/main.js that extends requestAnimationFrame\r\n * \r\n *   cancelAnimationFrame: takes the frame number and cancels the animation\r\n *   checkout the cancelFrame method in game/main.js that extends cancelAnimationFrame\r\n * \r\n * Learn more:\r\n *   https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame\r\n *   https://developer.mozilla.org/en-US/docs/Games/Techniques/Efficient_animation_for_web_games\r\n * \r\n */\r\n\r\nconst requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\r\n      window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\r\nconst cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\r\n\r\nexport { requestAnimationFrame, cancelAnimationFrame };","'use strict'\r\n\r\nvar cache = {}\r\n\r\nmodule.exports = function getContext (options) {\r\n\tif (typeof window === 'undefined') return null\r\n\t\r\n\tvar OfflineContext = window.OfflineAudioContext || window.webkitOfflineAudioContext\r\n\tvar Context = window.AudioContext || window.webkitAudioContext\r\n\t\r\n\tif (!Context) return null\r\n\r\n\tif (typeof options === 'number') {\r\n\t\toptions = {sampleRate: options}\r\n\t}\r\n\r\n\tvar sampleRate = options && options.sampleRate\r\n\r\n\r\n\tif (options && options.offline) {\r\n\t\tif (!OfflineContext) return null\r\n\r\n\t\treturn new OfflineContext(options.channels || 2, options.length, sampleRate || 44100)\r\n\t}\r\n\r\n\r\n\t//cache by sampleRate, rather strong guess\r\n\tvar ctx = cache[sampleRate]\r\n\r\n\tif (ctx) return ctx\r\n\r\n\t//several versions of firefox have issues with the\r\n\t//constructor argument\r\n\t//see: https://bugzilla.mozilla.org/show_bug.cgi?id=1361475\r\n\ttry {\r\n\t\tctx = new Context(options)\r\n\t}\r\n\tcatch (err) {\r\n\t\tctx = new Context()\r\n\t}\r\n\tcache[ctx.sampleRate] = cache[sampleRate] = ctx\r\n\r\n\treturn ctx\r\n}\r\n","'use strict'\r\n\r\n// DECODE UTILITIES\r\nfunction b64ToUint6 (nChr) {\r\n  return nChr > 64 && nChr < 91 ? nChr - 65\r\n    : nChr > 96 && nChr < 123 ? nChr - 71\r\n    : nChr > 47 && nChr < 58 ? nChr + 4\r\n    : nChr === 43 ? 62\r\n    : nChr === 47 ? 63\r\n    : 0\r\n}\r\n\r\n// Decode Base64 to Uint8Array\r\n// ---------------------------\r\nfunction decode (sBase64, nBlocksSize) {\r\n  var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\r\n  var nInLen = sB64Enc.length\r\n  var nOutLen = nBlocksSize\r\n    ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\r\n    : nInLen * 3 + 1 >> 2\r\n  var taBytes = new Uint8Array(nOutLen)\r\n\r\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\r\n    nMod4 = nInIdx & 3\r\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\r\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\r\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\r\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\r\n      }\r\n      nUint24 = 0\r\n    }\r\n  }\r\n  return taBytes\r\n}\r\n\r\nmodule.exports = { decode: decode }\r\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","'use strict'\r\n\r\nvar base64 = require('./base64')\r\nvar isBuffer = require('is-buffer')\r\n\r\n// Given a regex, return a function that test if against a string\r\nfunction fromRegex (r) {\r\n  return function (o) { return typeof o === 'string' && r.test(o) }\r\n}\r\n// Try to apply a prefix to a name\r\nfunction prefix (pre, name) {\r\n  return typeof pre === 'string' ? pre + name\r\n    : typeof pre === 'function' ? pre(name)\r\n    : name\r\n}\r\n\r\n/**\r\n * Load one or more audio files\r\n *\r\n *\r\n * Possible option keys:\r\n *\r\n * - __from__ {Function|String}: a function or string to convert from file names to urls.\r\n * If is a string it will be prefixed to the name:\r\n * `load('snare.mp3', { from: 'http://audio.net/samples/' })`\r\n * If it's a function it receives the file name and should return the url as string.\r\n * - __only__ {Array} - when loading objects, if provided, only the given keys\r\n * will be included in the decoded object:\r\n * `load('piano.json', { only: ['C2', 'D2'] })`\r\n *\r\n * @param {Object} source - the object to be loaded\r\n * @param {Object} options - (Optional) the load options for that object\r\n * @param {Object} defaultValue - (Optional) the default value to return as\r\n * in a promise if not valid loader found\r\n */\r\nfunction load (source, options, defVal) {\r\n  var loader =\r\n    // Basic audio loading\r\n      isArrayBuffer(source) || isBuffer(source) ? decodeBuffer\r\n    : isAudioFileName(source) ? loadAudioFile\r\n    : isPromise(source) ? loadPromise\r\n    // Compound objects\r\n    : isArray(source) ? loadArrayData\r\n    : isObject(source) ? loadObjectData\r\n    : isJsonFileName(source) ? loadJsonFile\r\n    // Base64 encoded audio\r\n    : isBase64Audio(source) ? loadBase64Audio\r\n    : isJsFileName(source) ? loadMidiJSFile\r\n    : null\r\n\r\n  var opts = options || {}\r\n  var promise = loader ? loader(source, opts)\r\n    : defVal ? Promise.resolve(defVal)\r\n    : Promise.reject('Source not valid (' + source + ')')\r\n\r\n  return promise.then(function (data) {\r\n    opts.ready(null, data)\r\n    return data\r\n  }, function (err) {\r\n    opts.ready(err)\r\n    throw err\r\n  })\r\n}\r\n\r\n// BASIC AUDIO LOADING\r\n// ===================\r\n\r\n// Load (decode) an array buffer\r\nfunction isArrayBuffer (o) { return o instanceof ArrayBuffer }\r\nfunction decodeBuffer (array, options) {\r\n  return options.decode(array)\r\n}\r\n\r\n// Load an audio filename\r\nvar isAudioFileName = fromRegex(/\\.(mp3|wav|ogg)(\\?.*)?$/i)\r\nfunction loadAudioFile (name, options) {\r\n  var url = prefix(options.from, name)\r\n  return load(options.fetch(url, 'arraybuffer'), options)\r\n}\r\n\r\n// Load the result of a promise\r\nfunction isPromise (o) { return o && typeof o.then === 'function' }\r\nfunction loadPromise (promise, options) {\r\n  return promise.then(function (value) {\r\n    return load(value, options)\r\n  })\r\n}\r\n\r\n// COMPOUND OBJECTS\r\n// ================\r\n\r\n// Try to load all the items of an array\r\nvar isArray = Array.isArray\r\nfunction loadArrayData (array, options) {\r\n  return Promise.all(array.map(function (data) {\r\n    return load(data, options, data)\r\n  }))\r\n}\r\n\r\n// Try to load all the values of a key/value object\r\nfunction isObject (o) { return o && typeof o === 'object' }\r\nfunction loadObjectData (obj, options) {\r\n  var dest = {}\r\n  var promises = Object.keys(obj).map(function (key) {\r\n    if (options.only && options.only.indexOf(key) === -1) return null\r\n    var value = obj[key]\r\n    return load(value, options, value).then(function (audio) {\r\n      dest[key] = audio\r\n    })\r\n  })\r\n  return Promise.all(promises).then(function () { return dest })\r\n}\r\n\r\n// Load the content of a JSON file\r\nvar isJsonFileName = fromRegex(/\\.json(\\?.*)?$/i)\r\nfunction loadJsonFile (name, options) {\r\n  var url = prefix(options.from, name)\r\n  return load(options.fetch(url, 'text').then(JSON.parse), options)\r\n}\r\n\r\n// BASE64 ENCODED FORMATS\r\n// ======================\r\n\r\n// Load strings with Base64 encoded audio\r\nvar isBase64Audio = fromRegex(/^data:audio/)\r\nfunction loadBase64Audio (source, options) {\r\n  var i = source.indexOf(',')\r\n  return load(base64.decode(source.slice(i + 1)).buffer, options)\r\n}\r\n\r\n// Load .js files with MidiJS soundfont prerendered audio\r\nvar isJsFileName = fromRegex(/\\.js(\\?.*)?$/i)\r\nfunction loadMidiJSFile (name, options) {\r\n  var url = prefix(options.from, name)\r\n  return load(options.fetch(url, 'text').then(midiJsToJson), options)\r\n}\r\n\r\n// convert a MIDI.js javascript soundfont file to json\r\nfunction midiJsToJson (data) {\r\n  var begin = data.indexOf('MIDI.Soundfont.')\r\n  if (begin < 0) throw Error('Invalid MIDI.js Soundfont format')\r\n  begin = data.indexOf('=', begin) + 2\r\n  var end = data.lastIndexOf(',')\r\n  return JSON.parse(data.slice(begin, end) + '}')\r\n}\r\n\r\nif (typeof module === 'object' && module.exports) module.exports = load\r\nif (typeof window !== 'undefined') window.loadAudio = load\r\n","/* global XMLHttpRequest */\r\n'use strict'\r\nvar load = require('./load')\r\nvar context = require('audio-context')\r\n\r\nmodule.exports = function (source, options, cb) {\r\n  if (options instanceof Function) {\r\n    cb = options\r\n    options = {}\r\n  }\r\n  options = options || {}\r\n  options.ready = cb || function () {}\r\n  var ac = options && options.context ? options.context : context()\r\n  var defaults = { decode: getAudioDecoder(ac), fetch: fetch }\r\n  var opts = Object.assign(defaults, options)\r\n  return load(source, opts)\r\n}\r\n\r\n/**\r\n * Wraps AudioContext's decodeAudio into a Promise\r\n */\r\nfunction getAudioDecoder (ac) {\r\n  return function decode (buffer) {\r\n    return new Promise(function (resolve, reject) {\r\n      ac.decodeAudioData(buffer,\r\n        function (data) { resolve(data) },\r\n        function (err) { reject(err) })\r\n    })\r\n  }\r\n}\r\n\r\n/*\r\n * Wraps a XMLHttpRequest into a Promise\r\n *\r\n * @param {String} url\r\n * @param {String} type - can be 'text' or 'arraybuffer'\r\n * @return {Promise}\r\n */\r\nfunction fetch (url, type) {\r\n  return new Promise(function (resolve, reject) {\r\n    var req = new XMLHttpRequest()\r\n    if (type) req.responseType = type\r\n\r\n    req.open('GET', url)\r\n    req.onload = function () {\r\n      req.status === 200 ? resolve(req.response) : reject(Error(req.statusText))\r\n    }\r\n    req.onerror = function () { reject(Error('Network Error')) }\r\n    req.send()\r\n  })\r\n}\r\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n","// create image from data uri\nconst createBase64Image = (dataUri) => {\n    return [dataUri]\n    .map(uri => {\n        let image = new Image();\n        image.src = uri;\n        return image;\n    }).reduce(img => img);\n}\n\nexport {\n    createBase64Image\n}","/**\n * game/helpers/placeholders.js\n * \n * What it Does:\n *   This file contains data uris for use as fallbacks\n * \n *   blankImage: used as an invisible image for optional images, avoids safari restrictions\n *   \n *   defaultImage: placeholder image for unloaded images\n * \n * What to Change:\n *   \n * How to Use it:\n */\n\n\n// 1x1 px transparent png from http://png-pixel.com/\n// blank image used for optional images\n// fixes Safari restriction on drawing unloaded images to canvas\n// https://github.com/konvajs/react-konva/issues/185\nconst blankImage = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=`;\n\n// 32x32 placeholder image from\n// lets developer know image was not loaded\nconst defaultImage = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAAAFzUkdC\nAK7OHOkAAAA8UExURQAAANHR0UJCQmtra5ubm////xISEre3txMTE5ycnLi4uOnp6SYmJt3d3VhY\nWPT09I2Njaqqqn19fcXFxbjmkisAAAFqSURBVFjDpdfbcoQgDAbggE1dDuK6ff93LajbLgpJgMw4\ncPUNJL8XwDxYMM9f39BdCTAjQgIeI0ICYETYgRHhAAaEE+gX3oBQMGpDNHFFXKYckAkGVfz8Eyew\nq84BkWBWgIB62eLemQsgEYwC0KjXZ9wrewUEwglUTiAQTqDcA4lwAsUp0IIyXA4aOkkDrcIdKAvx\nCmgcKr2g0+BVzKObKkBRSIALAdfJrxtYp/2CVaAkJCCmx8Xw/FiPLwBPALvwuAHTER5r0yABKOAu\nZAB/gruQAbEHARQNXIUc2KfAAIU+5BUw0AAlpGEoBwxACGGJP5NmAfYWLCARaEAgMAAvcAArsAAn\n8AAjCABakACkIAIoQQYQghCoC1KgKoiBmiAHKkIDUBZagKLQBJSENqAgNAJ3oRW4Cc3AVWgHLkIH\nkAs9QCZ0AZ9CH/AhdAL/Qi/wJ3QDb6EfOIUB4BBGgCSYISAJY8AuwOjz/xdsEharPg6y9AAAAABJ\nRU5ErkJggg==`;\n\nexport { blankImage, defaultImage };","/**\n * What it Does:\n *   This file contains loaders for images, sounds, and fonts.\n *   and a loadList function that lets you load any of these in a list.\n * \n *   loadList: takes a list of assets loaders (loadImage, loadSound, or loadFont)\n *   and returns a list of object containing { type, key, value }\n *   where value is the loaded asset only after all the assets have loaded\n *   \n *   loadImage: takes a key and a url and returns an object containing\n *   { type: 'image', key: '<key>', value: '<the loaded image>' }\n * \n *   loadSound: takes a key and a url and returns an object containing\n *   { type: 'sound', key: '<key>', value: '<the loaded sound>' }\n * \n *   loadFont: takes a key and a google fontName and returns an object containing\n *   { type: 'font', key: '<key>', value: '<the loaded font>' }\n *   \n * What to Change:\n *   \n *   \n * How to Use it:\n * \n *   loadList: input an array of loaders and pass a function to handle the the loaded assets\n *   eg. loadList(<list of loaders>).then(<function handle loaded assets>)\n * \n *     loadList([\n *       loadImage('image_key', 'image_url'),\n *       loadSound('sound_key', 'sound_url'),\n *       loadFont('font_key', 'font_name')\n *     ]).then((loadedAssets) => {\n *       // attach loaded assets\n *     })\n *   \n *   loadImage: \n *       loadImage('image_key', 'image_url')\n *         .then((loadedImage) => {\n *            // attach loaded image\n *         }) \n * \n *   loadSound: \n *       loadSound('sound_key', 'sound_url')\n *         .then((loadedSound) => {\n *            // attach loaded sound\n *         }) \n * \n *   loadFont: \n *       loadFont('font_key', 'font_name')\n *         .then((loadedFont) => {\n *            // attach loaded font\n *         }) \n *   \n */\n\nimport audioContext from 'audio-context';\nimport audioBufferLoader from 'audio-loader';\nimport WebFont from 'webfontloader'\n\nimport { createBase64Image } from './utils.js';\nimport { blankImage, defaultImage } from './placeholders.js';\n\nconst loadList = (list, progress) => {\n    // calculate loading progress\n    let i = 0;\n    progress({ percent: 0, loaded: null });\n    for (const prm of list) {\n        prm.then((asset) => {\n            i++;\n            progress({\n                percent: Math.floor(i * 100 / list.length),\n                loaded: { type: asset.type, key: asset.key }\n            })\n        });\n    }\n\n    return Promise.all(list)\n        .then((assets) => {\n            return assets.reduce((collection, asset) => {\n                // separate assets by type\n                // add them to the collection\n\n                const { type, key, value } = asset;\n\n                const collectionIncludes = Object.keys(collection).includes(type);\n                if (!collectionIncludes) { collection[type] = {} }\n\n                collection[type][key] = value;\n                return collection;\n            }, {});\n        })\n}\n\nconst loadImage = (key, url, opts = {}) => {\n    return new Promise((resolve, reject) => {\n        let { optional, params } = opts;\n\n        // reject with error for missing key or url\n        if (!key) { reject(new Error('key required')) }\n\n        let image = new Image;\n        image.src = [url, params].filter(i => i).join('?')\n\n        // loaded\n        image.onload = () => {\n            // pre-decode so decoding will not block main thread\n            // especially for large background images\n            if (image.decode) {\n                image.decode()\n                .then(() => {\n                    resolve({\n                        type: 'image',\n                        key: key,\n                        value: image\n                    });\n                })\n                .catch((err) => {\n                    // decode error\n                    console.error(err);\n                    resolve({\n                        type: 'image',\n                        key: key,\n                        value: optional && url === '' ?\n                        createBase64Image(blankImage) :\n                        createBase64Image(defaultImage)\n                    });\n                });\n            } else {\n                resolve({\n                    type: 'image',\n                    key: key,\n                    value: image\n                });\n            }\n        };\n\n        // load error\n        image.onerror = (err) => {\n            if (!optional) {\n                console.error(err);\n            }\n\n            resolve({\n                type: 'image',\n                key: key,\n                value: optional && url === '' ?\n                createBase64Image(blankImage) :\n                createBase64Image(defaultImage)\n            });\n        };\n    });\n\n}\n\nconst loadSound = (key, url) => {\n    let result = { type: 'sound', key: key, value: null };\n\n    return new Promise((resolve, reject) => {\n        // reject with error for missing key or url\n        if (!key) { reject(new Error('key required')) }\n\n        audioBufferLoader(url)\n            .then((sound) => {\n                resolve({\n                    type: 'sound',\n                    key: key,\n                    value: sound\n                });\n            })\n            .catch((err) => {\n                // log an error and resolve a silent audio buffer\n                // previously created with new AudioBuffer (unsupported on safari)\n                // note: sampleRate must also be 22050 to work on safari\n                // value: new AudioBuffer({ length: 1, numberOfChannels: 1, sampleRate: 8000 })\n                console.error('loadSound', err)\n\n                const audioCtx = audioContext()\n                resolve({\n                    type: 'sound',\n                    key: key,\n                    value: audioCtx.createBuffer(1, 1, 22050)\n                })\n                \n            })\n    });\n}\n\nconst loadFont = (key, fontName, opts = {}) => {\n    return new Promise((resolve, reject) => {\n        let { fallback } = opts;\n\n        // reject with error for missing key or url\n        if (!key) { reject(new Error('key required')) }\n\n        if (!fontName) { resolve({\n            type: 'font',\n            key: key,\n            value: fallback || 'Arial'\n        })}\n\n        WebFont.load({\n            google: {\n                families: [fontName]\n            },\n            fontactive: familyName => {\n                resolve({\n                    type: 'font',\n                    key: key,\n                    value: familyName\n                });\n            },\n            fontinactive: () => {\n                resolve({\n                    type: 'font',\n                    key: key,\n                    value: fallback || 'Arial'\n                });\n            }\n        });\n    });\n}\n\nexport { loadList, loadImage, loadSound, loadFont };","/**\r\n * @module  is-audio-buffer\r\n */\r\n'use strict';\r\n\r\nmodule.exports = function isAudioBuffer (buffer) {\r\n\t//the guess is duck-typing\r\n\treturn buffer != null\r\n\t&& typeof buffer.length === 'number'\r\n\t&& typeof buffer.sampleRate === 'number' //swims like AudioBuffer\r\n\t&& typeof buffer.getChannelData === 'function' //quacks like AudioBuffer\r\n\t// && buffer.copyToChannel\r\n\t// && buffer.copyFromChannel\r\n\t&& typeof buffer.duration === 'number'\r\n};\r\n","/** @module  audio-play Play buffer in browser via WAA */\r\n\r\n'use strict'\r\n\r\nvar getContext = require('audio-context')\r\nvar isAudioBuffer = require('is-audio-buffer')\r\n\r\nmodule.exports = function Play (buffer, how, cb) {\r\n\tif (!isAudioBuffer(buffer)) throw Error('Argument should be an audio buffer')\r\n\r\n\tif (how instanceof Function) {\r\n\t\tcb = how\r\n\t}\r\n\r\n\thow = how || {}\r\n\tcb = cb || function () {}\r\n\r\n\tif (how.context == null) how.context = getContext()\r\n\r\n\tif (how.currentTime == null) how.currentTime = 0\r\n\tif (how.start == null) how.start = 0\r\n\tif (how.end == null) how.end = buffer.duration\r\n\thow.start = normTime(how.start, buffer.duration)\r\n\thow.end = normTime(how.end, buffer.duration)\r\n\r\n\tvar sourceNode = createNode(buffer, how)\r\n\r\n\tif (!how.gain) {\r\n\t\thow.gain = how.context.createGain()\r\n\t\thow.gain.gain.value = how.volume == null ? 1 : how.volume\r\n\t\thow.gain.connect(how.context.destination)\r\n\t}\r\n\tsourceNode.connect(how.gain)\r\n\r\n\tsourceNode.addEventListener('ended', cb)\r\n\r\n\t//provide API\r\n\tplay.play = pause.play = play\r\n\tplay.pause = pause.pause = pause\r\n\r\n\tvar startTime = 0\r\n\tvar isPlaying = false\r\n\r\n\treturn how.autoplay != false ? play() : play\r\n\r\n\tfunction play () {\r\n\t\tif (isPlaying) return pause\r\n\r\n\t\tisPlaying = true\r\n\r\n\t\tstartTime = how.context.currentTime\r\n\r\n\t\tif (how.loop) {\r\n\t\t\tsourceNode.start(startTime, how.start + how.currentTime)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsourceNode.start(startTime, how.start + how.currentTime, how.end - how.start)\r\n\t\t}\r\n\r\n\t\treturn pause\r\n\t}\r\n\r\n\tfunction pause () {\r\n\t\tif (!isPlaying) return pause.play\r\n\t\tisPlaying = false\r\n\r\n\t\tsourceNode.stop()\r\n\t\tsourceNode.removeEventListener('ended', cb)\r\n\r\n\t\tvar playedTime = (how.context.currentTime - startTime)\r\n\r\n\t\thow.autoplay = false\r\n\t\thow.currentTime = playedTime\r\n\r\n\t\tvar playback = Play(buffer, how, cb)\r\n\t\tplay.play = pause.play = playback.play\r\n\t\tplay.pause = pause.pause = playback.pause\r\n\t\tplay.currentTime = pause.currentTime = playback.currentTime = how.currentTime\r\n\r\n\t\treturn playback\r\n\t}\r\n}\r\n\r\nfunction normTime (time, duration) {\r\n\treturn time < 0 ? (duration + (time % duration)) : Math.min(duration, time)\r\n}\r\n\r\nfunction createNode (buffer, how) {\r\n\tvar sourceNode = how.context.createBufferSource()\r\n\r\n\tsourceNode.buffer = buffer\r\n\r\n\t//init options\r\n\tif (how.detune != null) sourceNode.detune = how.detune\r\n\tif (how.rate != null) sourceNode.playbackRate.value = how.rate\r\n\r\n\r\n\tif (how.loop) {\r\n\t\tsourceNode.loop = true\r\n\t\tsourceNode.loopStart = how.start\r\n\t\tsourceNode.loopEnd = how.end\r\n\t}\r\n\r\n\treturn sourceNode\r\n}\r\n","// read userAgent\nconst device = () => {\n\treturn {\n            isMobile: /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),\n            iOS: /iPhone|iPad|iPod/i.test(navigator.userAgent)\n\t}\n}\n\n// unlock locked audio contexts\nconst unlockAudio = (audioCtx) => {\n\tlet currentDevice = device()\n\tlet called = false\n\tif (currentDevice.isMobile && audioCtx.state === 'suspended') {\n\t    // check for locked audio context on touchend\n\t    // NOTE: NOT using touchstart to avoid getting relocked incase gesture is detected.\n\t    document.addEventListener('touchend', () => {\n\t\t\tif (!called && audioCtx.state !== 'running') {\n\t\t\t\taudioCtx.resume()\n\t\t\t\tcalled = true\n\t\t\t}\n\t    })\n\t}\n}\n\nexport default unlockAudio\n","// prevent parent\n\nconst preventParent = (preventedKeysList = ['ArrowDown', 'ArrowUp', 'ArrowRight', 'ArrowLeft']) => {\n    document.addEventListener('keydown', (e) => {\n        if (preventedKeysList.includes(e.code)) {\n            e.preventDefault()\n            e.stopPropagation()\n        }\n    })\n}\n\nexport default preventParent\n","/**\r\n * game/helpers/utils.js\r\n * \r\n * What it Does:\r\n *   This file contains utilities for the game\r\n * \r\n *   throttled: wraps a function so that it can't be called until the delay\r\n *   in milliseconds has gone by. useful for stopping unwanted side effects of button mashing.\r\n *   https://gph.is/1syA0yc\r\n * \r\n * \r\n * What to Change:\r\n *   Add any new methods that don't fit anywhere else\r\n *   eg. \r\n * \r\n */\r\n\r\n// throttled function wrapper\r\n// checkout: https://outline.com/nBajAS\r\nconst throttled = (delay, fn) => {\r\n    let lastCall = 0;\r\n    return function (...args) {\r\n        const now = (new Date).getTime();\r\n        if (now - lastCall < delay) {\r\n            return;\r\n        }\r\n        lastCall = now;\r\n        return fn(...args);\r\n    }\r\n}\r\n\r\n// boundBy\r\n// apply a lower and upper bound to a number\r\nconst boundBy = (n, upper, lower) => {\r\n    return [n]\r\n    .map(n => n < lower ? lower : n)\r\n    .map(n => n > upper ? upper : n)\r\n    .reduce(n => n);\r\n}\r\n\r\n// toy hash for prefixes\r\n// useful for prefexing localstorage keys\r\nconst hashCode = (str, base = 16) => {\r\n    return [str.split(\"\")\r\n    .reduce(function(a, b) {\r\n      a = ((a << 5) - a) + b.charCodeAt(0);\r\n      return a & a\r\n    }, 0)] // create simple hash from string\r\n    .map(num => Math.abs(num)) // only positive numbers\r\n    .map(num => num.toString(base)) // convert to base\r\n    .reduce(h => h); // fold\r\n}\r\n\r\nexport { throttled, boundBy, hashCode };","/**\r\n * game/objects/image.js\r\n * \r\n * What it Does:\r\n *   This file is a basic image class\r\n *   it contains a basic draw method that draws the image to screen\r\n * \r\n */\r\n\r\nclass Image {\r\n    constructor({ctx, image, x, y, width, height }) {\r\n        this.ctx = ctx;\r\n        this.image = image;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    draw(x, y) {\r\n        let xPosition = x || this.x;\r\n        let yPosition = y || this.y;\r\n\r\n        this.ctx.drawImage(this.image, xPosition, yPosition, this.width, this.height);\r\n    }\r\n}\r\n\r\nexport default Image;","/**\r\n * game/objects/sprite.js\r\n * \r\n * What it Does:\r\n *   This file is a basic sprite\r\n *   it implements abilities like move(x, y)\r\n *   speed, direction, velocity, and bounds\r\n * \r\n * What to Change:\r\n *   Add any new methods you want all your\r\n *   game characters that are also sprites to have.\r\n *   eg. \r\n * \r\n */\r\n\r\nclass Sprite {\r\n    constructor({ x, y, width, height, speed, direction, bounds }) {\r\n        // x and y\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        // previous x and y\r\n        this.px = x;\r\n        this.py = x;\r\n\r\n        // center x and y\r\n        this.cx = x + (width/2);\r\n        this.cy = y + (height/2);\r\n\r\n        // velocity x and y\r\n        this.vx = 0;\r\n        this.vy = 0;\r\n\r\n        // width and height\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        // radius\r\n        this.radius = (width + height) / 4;\r\n\r\n        // speed\r\n        this.speed = speed || 1;\r\n\r\n        // direction\r\n        this.direction = direction || 'right';\r\n\r\n        // bounds\r\n        this.bounds = { top: 0, right: 0, bottom: 0, left: 0 };\r\n        this.setBounds(bounds);\r\n    }\r\n\r\n    move(x, y, m) {\r\n        let dx = x === 0 ? this.x : this.x + (x * this.speed * m);\r\n        let dy = y === 0 ? this.y : this.y + (y * this.speed * m);\r\n        \r\n        // apply x bounds\r\n        let inBoundsX = dx >= this.bounds.left && dx <= this.bounds.right - this.width;\r\n        if (inBoundsX) {\r\n            this.setX(dx);\r\n        } else {\r\n            let snapTo = dx < this.bounds.left ? this.bounds.left : this.bounds.right - this.width;\r\n            this.setX(snapTo);\r\n        }\r\n\r\n        // apply y bounds\r\n        let inBoundsY = dy >= this.bounds.top && dy <= this.bounds.bottom - this.height;\r\n        if (inBoundsY) {\r\n            this.setY(dy);\r\n        } else {\r\n            let snapTo = dy < this.bounds.top ? this.bounds.top : this.bounds.bottom - this.height;\r\n            this.setY(snapTo);\r\n        }\r\n\r\n        // set direction\r\n        if (x < 0) { this.direction = 'right'; }\r\n        if (x > 0) { this.direction = 'left'; }\r\n    }\r\n\r\n    setX(x) {\r\n        this.px = this.x; // store previous x value\r\n        this.x = x; // set x\r\n\r\n        this.cx = this.x + (this.width/2); // set center x\r\n        this.vx = this.x - this.px; // set velocity x\r\n    }\r\n\r\n    setY(y) {\r\n        this.py = this.y; // store previous y value\r\n        this.y = y; // set y\r\n\r\n        this.cy = this.y + (this.height/2); // set center y\r\n        this.vy = this.y - this.py; // set velocity y\r\n    }\r\n\r\n    setBounds({ top, right, bottom, left }) {\r\n        let bounds = {\r\n            top: top,\r\n            right: right,\r\n            bottom: bottom,\r\n            left: left\r\n        };\r\n\r\n        this.bounds = {\r\n            ...this.bounds,\r\n            ...bounds\r\n        }\r\n    }\r\n}\r\n\r\nexport default Sprite;","/**\r\n * game/objects/iamgeSprite.js\r\n * \r\n * What it Does:\r\n *   This file is a basic image sprite it extends the sprite class\r\n *   and draws an image to the screen\r\n * \r\n * What to Change:\r\n *   Add any new methods you want all your\r\n *   game characters that are also sprites to have.\r\n *   eg. \r\n * \r\n */\r\n\r\nimport Sprite from './sprite.js';\r\n\r\nclass ImageSprite extends Sprite {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        this.ctx = options.ctx;\r\n        this.image = options.image;\r\n    }\r\n\r\n    draw() {\r\n        // save canvas context\r\n        this.ctx.save();\r\n\r\n        // code for flipping image to match direction\r\n        let scaleX = this.direction === 'left' ? -1 : 1;\r\n        let xPosition = this.direction === 'left' ? -1 * this.x : this.x;\r\n        let trX = this.direction === 'left' ? this.width : 0;\r\n\r\n        this.ctx.translate(trX, 0);\r\n        this.ctx.scale(scaleX, 1);\r\n\r\n        // draw the image to canvas\r\n        this.ctx.drawImage(this.image, xPosition, this.y, this.width, this.height);\r\n\r\n        // restore canvas context\r\n        this.ctx.restore();\r\n    }\r\n}\r\n\r\nexport default ImageSprite;","/**\r\n * game/character/player.js\r\n *\r\n * What it Does:\r\n *   This file is a basic player character\r\n *   it extends the Sprite class and adds two collision detections methods\r\n *\r\n * What to Change:\r\n *   Add any character specific methods\r\n *   eg. eat\r\n *\r\n */\r\n\r\nimport ImageSprite from '../objects/imageSprite.js';\r\n\r\nclass Player extends ImageSprite {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        this.ctx = options.ctx;\r\n        this.color = options.color;\r\n        this.name = options.name;\r\n        this.score = 0;\r\n    }\r\n\r\n    draw() {\r\n        // this.ctx.fillStyle = this.color;\r\n        // this.ctx.fillRect(this.x, this.y, this.width, this.height);\r\n        this.ctx.drawImage(this.image, this.x, this.y, this.width, this.height);\r\n    }\r\n}\r\n\r\nexport default Player;","/**\r\n * game/character/ball.js\r\n *\r\n * What it Does:\r\n *   This file is a basic ball character\r\n *   it extends the Sprite class and adds two collision detections methods\r\n *\r\n * What to Change:\r\n *   Add any character specific methods\r\n *   eg. eat\r\n *\r\n */\r\n\r\nimport ImageSprite from '../objects/imageSprite.js';\r\n\r\nclass Ball extends ImageSprite {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        this.dx = -1;\r\n        // this.dy = -1;\r\n        this.dy = 0;\r\n        this.launched = false;\r\n    }\r\n\r\n    move(m) {\r\n        if (!this.launched) { return; }\r\n\r\n        super.move(this.dx, this.dy, m);\r\n    }\r\n\r\n    launch(delay, dx, offset) {\r\n        let totalOffset = (offset + this.width) * dx;\r\n\r\n        this.stop();\r\n        if (delay) {\r\n            setTimeout(() => {\r\n                this.launched = true;\r\n                this.x = this.x + totalOffset;\r\n                this.dx = dx;\r\n            }, delay);\r\n        } else {\r\n            this.launched = true;\r\n            this.x = this.x + totalOffset;\r\n            this.dx = dx;\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.launched = false;\r\n        this.dx = 0;\r\n    }\r\n\r\n    collisionsWith(entities) {\r\n        let result = entities\r\n          .find((ent) => { return this.collidesWith(ent); });\r\n\r\n        return result;\r\n    };\r\n\r\n    collidesWith(entity) {\r\n        let distanceX = Math.abs(entity.cx - this.cx);\r\n        let onY = this.cy > entity.y && this.cy < entity.y + entity.height;\r\n\r\n        return onY && distanceX < (entity.width  + this.width) / 2;\r\n    }\r\n}\r\n\r\nexport default Ball;","/**\r\n * game/main.js\r\n *\r\n * What it Does:\r\n *   This file is the main game class\r\n *   Important parts are the load, create, and play functions\r\n *\r\n *   Load: is where images, sounds, and fonts are loaded\r\n *\r\n *   Create: is where game elements and characters are created\r\n *\r\n *   Play: is where game characters are updated according to game play\r\n *   before drawing a new frame to the screen, and calling play again\r\n *   this creates an animation just like the pages of a flip book\r\n *\r\n *   Other parts include boilerplate for requesting and canceling new frames\r\n *   handling input events, pausing, muting, etc.\r\n *\r\n * What to Change:\r\n *   Most things to change will be in the play function\r\n */\r\n\r\nimport Koji from 'koji-tools';\r\n\r\nimport {\r\n    requestAnimationFrame,\r\n    cancelAnimationFrame\r\n} from './helpers/animationframe.js';\r\n\r\nimport {\r\n    loadList,\r\n    loadImage,\r\n    loadSound,\r\n    loadFont\r\n} from 'game-asset-loader';\r\n\r\nimport audioContext from 'audio-context';\r\nimport audioPlayback from 'audio-play';\r\nimport unlockAudioContext from 'unlock-audio-context';\r\n\r\nimport preventParent from 'prevent-parent';\r\n\r\nimport { boundBy, hashCode } from './helpers/utils.js';\r\n\r\nimport Image from './objects/image.js';\r\nimport Player from './characters/player.js';\r\nimport Ball from './characters/ball.js';\r\n\r\nclass Game {\r\n\r\n    constructor(canvas, overlay, topbar, config) {\r\n        this.config = config; // customization\r\n        this.topbar = topbar;\r\n        this.overlay = overlay;\r\n\r\n        this.prefix = hashCode(this.config.settings.name); // set prefix for local-storage keys\r\n\r\n        this.canvas = canvas; // game screen\r\n        this.ctx = canvas.getContext(\"2d\"); // game screen context\r\n\r\n        this.audioCtx = audioContext(); // create new audio context\r\n        unlockAudioContext(this.audioCtx);\r\n        this.playlist = [];\r\n\r\n        // prevent parent wondow form scrolling\r\n        preventParent();\r\n\r\n        // frame count, rate, and time\r\n        // this is just a place to keep track of frame rate (not set it)\r\n        this.frame = {\r\n            count: 0,\r\n            time: Date.now(),\r\n            rate: null,\r\n            scale: null\r\n        };\r\n\r\n        // game settings\r\n        this.state = {\r\n            current: 'loading',\r\n            prev: null,\r\n            paused: false,\r\n            muted: localStorage.getItem(this.prefix.concat('muted')) === 'true'\r\n        };\r\n\r\n        this.input = {\r\n            active: true,\r\n            current: 'keyboard',\r\n            keyboard: { up: false, right: false, left: false, down: false },\r\n            mouse: { x: 0, y: 0, click: false },\r\n            touch: { x: 0, y: 0 },\r\n        };\r\n\r\n        this.input2 = {\r\n            active: false,\r\n            current: 'keyboard',\r\n            keyboard: { up: false, right: false, left: false, down: false }\r\n        }\r\n\r\n\r\n        this.images = {}; // place to keep images\r\n        this.sounds = {}; // place to keep sounds\r\n        this.fonts = {}; // place to keep fonts\r\n\r\n        // setup event listeners\r\n        // handle keyboard events\r\n        document.addEventListener('keydown', ({ code }) => this.handleKeyboardInput('keydown', code));\r\n        document.addEventListener('keyup', ({ code }) => this.handleKeyboardInput('keyup', code));\r\n\r\n        // setup event listeners for mouse movement\r\n        document.addEventListener('mousemove', ({ clientY }) => this.handleMouseMove(clientY));\r\n\r\n        // setup event listeners for mouse movement\r\n        document.addEventListener('touchmove', ({ touches }) => this.handleTouchMove(touches[0]));\r\n\r\n        // handle overlay clicks\r\n        this.overlay.root.addEventListener('click', ({ target }) => this.handleClicks(target));\r\n\r\n        // handle resize events\r\n        window.addEventListener('resize', () => this.handleResize());\r\n        window.addEventListener(\"orientationchange\", (e) => this.handleResize(e));\r\n\r\n        // handle koji config changes\r\n        Koji.on('change', (scope, key, value) => {\r\n            console.log('updating configs...', scope, key, value);\r\n            this.config[scope][key] = value;\r\n            this.cancelFrame(this.frame.count - 1);\r\n            this.load();\r\n        });\r\n    }\r\n\r\n    load() {\r\n        // load pictures, sounds, and fonts\r\n\r\n        // set topbar and topbar color\r\n        this.topbar.active = this.config.settings.gameTopBar;\r\n        this.topbar.style.display = this.topbar.active ? 'block' : 'none';\r\n        this.topbar.style.backgroundColor = this.config.colors.primaryColor;\r\n\r\n        this.canvas.width = window.innerWidth; // set game screen width\r\n        this.canvas.height = this.topbar.active ? window.innerHeight - this.topbar.clientHeight : window.innerHeight; // set game screen height\r\n\r\n        this.screen = {\r\n            top: 0,\r\n            bottom: this.canvas.height,\r\n            left: 0,\r\n            right: this.canvas.width,\r\n            centerX: this.canvas.width / 2,\r\n            centerY: this.canvas.height / 2,\r\n            scale: ((this.canvas.width + this.canvas.height) / 2) * 0.003\r\n        };\r\n\r\n\r\n\r\n        // set loading indicator to textColor\r\n        document.querySelector('#loading').style.color = this.config.colors.textColor;\r\n\r\n        // set winscore\r\n        this.setState({ winScore: parseInt(this.config.settings.winScore) });\r\n\r\n        // set overlay styles\r\n        this.overlay.setStyles({...this.config.colors, ...this.config.settings});\r\n\r\n        // make a list of assets\r\n        const gameAssets = [\r\n            loadImage('backgroundImage', this.config.images.backgroundImage),\r\n            loadImage('ballImage', this.config.images.ballImage),\r\n            loadImage('player1Image', this.config.images.player1Image),\r\n            loadImage('player2Image', this.config.images.player2Image),\r\n            loadSound('bounceSound', this.config.sounds.bounceSound),\r\n            loadSound('scoreSound', this.config.sounds.scoreSound),\r\n            loadSound('backgroundMusic', this.config.sounds.backgroundMusic),\r\n            loadFont('gameFont', this.config.settings.fontFamily)\r\n        ];\r\n\r\n        // put the loaded assets the respective containers\r\n        loadList(gameAssets, (progress) => {\r\n            document.getElementById('loading-progress').textContent = `${progress.percent}%`;\r\n        })\r\n          .then((assets) => {\r\n\r\n              this.images = assets.image;\r\n              this.sounds = assets.sound;\r\n\r\n          })\r\n          .then(() => this.create())\r\n          .catch(err => console.error(err));\r\n    }\r\n\r\n    create() {\r\n        // create game characters\r\n\r\n        const { scale, centerY, right } = this.screen;\r\n        const { playerHeight, playerWidth } = this.config.settings\r\n\r\n        let pHeight = playerHeight * scale;\r\n        let pWidth = playerWidth * scale;\r\n\r\n        this.player1 = new Player({\r\n            name: 'player1',\r\n            ctx: this.ctx,\r\n            image: this.images.player1Image,\r\n            // color: this.config.colors.rightPaddleColor,\r\n            x: right - pWidth*2,\r\n            y: centerY - pHeight / 2,\r\n            width: pWidth*1.5,\r\n            height: pHeight*1.3,\r\n            speed: 50,\r\n            bounds: this.screen\r\n        })\r\n\r\n        this.player2 = new Player({\r\n            name: 'player2',\r\n            ctx: this.ctx,\r\n            image: this.images.player2Image,\r\n            // color: this.config.colors.leftPaddleColor,\r\n            x: 0,\r\n            y: centerY - pHeight / 2,\r\n            width: pWidth*5,\r\n            height: pHeight,\r\n            speed: 50,\r\n            bounds: this.screen\r\n        });\r\n\r\n        // ball\r\n        let ballSpeed = parseInt(this.config.settings.ballSpeed);\r\n        let ballSize = parseInt(this.config.settings.ballSize);\r\n\r\n        let ballWidth =  ballSize * scale;\r\n        let ballHeight = ballSize * scale;\r\n\r\n        this.ball = new Ball({\r\n            ctx: this.ctx,\r\n            image: this.images.ballImage,\r\n            x: this.screen.right + ballWidth,\r\n            y: this.player1.y,\r\n            width: ballWidth,\r\n            height: ballHeight,\r\n            speed: ballSpeed,\r\n            bounds: {\r\n                top: 0,\r\n                right: this.screen.right + ballWidth,\r\n                left: this.screen.left - ballWidth,\r\n                bottom: this.screen.bottom\r\n            }\r\n        })\r\n\r\n        // background\r\n        this.background = new Image({\r\n            ctx: this.ctx,\r\n            image: this.images.backgroundImage,\r\n            x: 0,\r\n            y: 0,\r\n            width: this.screen.right,\r\n            height: this.screen.bottom\r\n        });\r\n\r\n        // set game state ready\r\n        this.setState({ current: 'ready' });\r\n        this.play();\r\n    }\r\n\r\n    play() {\r\n        // update game characters\r\n\r\n        // clear the screen of the last picture\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        // draw and do stuff that you need to do\r\n        // no matter the game state\r\n        if (this.background) {\r\n            this.background.draw();\r\n        }\r\n\r\n        // update scores\r\n        this.overlay.setScore1(`${this.player1.score}/${this.state.winScore}`);\r\n        this.overlay.setScore2(`${this.player2.score}/${this.state.winScore}`);\r\n\r\n        // ready to play\r\n        if (this.state.current === 'ready' && this.state.prev === 'loading') {\r\n            this.overlay.hideLoading();\r\n            this.canvas.style.opacity = 1;\r\n\r\n            this.overlay.setBanner(this.config.settings.name);\r\n            this.overlay.setButton(this.config.settings.startText);\r\n            this.overlay.showStats();\r\n\r\n            this.overlay.setMute(this.state.muted);\r\n            this.overlay.setPause(this.state.paused);\r\n\r\n            this.overlay.setInstructions({\r\n                desktop: this.config.settings.instructionsDesktop,\r\n                mobile: this.config.settings.instructionsMobile\r\n            });\r\n\r\n            this.setState({ current: 'ready' });\r\n        }\r\n\r\n        // game play\r\n        if (this.state.current === 'play') {\r\n            // hide overlays if coming from ready\r\n            if (this.state.prev === 'ready') {\r\n                this.overlay.hideBanner();\r\n                this.overlay.hideButton();\r\n                this.overlay.hideInstructions();\r\n            }\r\n\r\n            // check for winner\r\n            if (this.player1.score === this.state.winScore) {\r\n                this.setState({ current: 'win-player1'})\r\n            }\r\n\r\n            if (this.player2.score === this.state.winScore) {\r\n                this.setState({ current: 'win-player2'})\r\n            }\r\n\r\n\r\n            if (!this.state.muted && !this.state.backgroundMusic) {\r\n                let sound = this.sounds.backgroundMusic;\r\n                this.state.backgroundMusic = audioPlayback(sound, {\r\n                    start: 0,\r\n                    end: sound.duration,\r\n                    loop: true,\r\n                    context: this.audioCtx\r\n                });\r\n            }\r\n\r\n            // player 1\r\n            if (this.input.current === 'keyboard') {\r\n                let dy1 = (this.input.keyboard.up ? -1 : 0) + (this.input.keyboard.down ? 1 : 0);\r\n                this.player1.move(0, dy1, this.frame.scale);\r\n            }\r\n\r\n            if (this.input.current === 'mouse') {\r\n                let y = this.input.mouse.y - this.canvas.offsetTop;\r\n                let diffY =  y - this.player1.y - this.player1.height / 2;\r\n                this.player1.move(0, diffY / 100, 1);\r\n            }\r\n\r\n            if (this.input.current === 'touch') {\r\n                let y = this.input.touch.y - this.canvas.offsetTop;\r\n                let diffY =  y - this.player1.y - this.player1.height / 2;\r\n                this.player1.move(0, diffY / 100, 1);\r\n            }\r\n\r\n            this.player1.draw();\r\n\r\n            // player 2: computer\r\n            if (!this.input2.active && this.ball.launched && this.ball.dx < 0) {\r\n\r\n                // move computer player toward the ball\r\n                // get diffY and calculate dy\r\n                let diffY = this.ball.y / 2 - this.player2.y;\r\n                let dy2 = diffY / (this.ball.x * 2);\r\n\r\n                // apply a difficulty/speed limit\r\n                let difficulty = parseInt(this.config.settings);\r\n                let speedLimit = difficulty / 2;\r\n                let dy2capped = boundBy(dy2, speedLimit, -speedLimit);\r\n                this.player2.move(0, dy2capped, this.frame.scale);\r\n            }\r\n\r\n            // player 2: human\r\n            if (this.input2.active) {\r\n                // move player 2\r\n                let dy2 = (this.input2.keyboard.up ? -1 : 0) + (this.input2.keyboard.down ? 1 : 0);\r\n                this.player2.move(0, dy2, this.frame.scale);\r\n            }\r\n\r\n            this.player2.draw();\r\n\r\n            // ball\r\n            // bounce ball off of ceiling or floor\r\n            let onEdgeY = this.ball.y === this.screen.top || this.ball.y === this.screen.bottom - this.ball.height;\r\n            if (onEdgeY) { this.ball.dy = -this.ball.dy; }\r\n\r\n            // bounce ball off player1\r\n            let collided = this.ball.collisionsWith([this.player1, this.player2]);\r\n            if (collided && collided.name === 'player1') {\r\n                // add some velocity\r\n                // change ball direction\r\n                // add some speed\r\n                this.ball.dx = -1;\r\n                this.ball.speed += 1;\r\n            }\r\n\r\n            // bounce ball off player2\r\n            if (collided && collided.name === 'player2') {\r\n                this.ball.stop();\r\n                this.ball.setY(-100);\r\n                this.player2.score += 1;\r\n                this.ball.launched = false;\r\n                this.ball.x = this.canvas.width;\r\n            }\r\n\r\n            // if ball touches left side, player1 scores\r\n            if (this.ball.launched && this.ball.x <= this.ball.bounds.left) {\r\n                // give player1 one point\r\n                this.player1.score += 1;\r\n\r\n                // reset ball speed\r\n                this.ball.speed = parseInt(this.config.settings.ballSpeed);\r\n                this.ball.launched = false;\r\n                this.ball.x = this.canvas.width;\r\n            }\r\n\r\n            this.ball.move(this.frame.scale);\r\n            this.ball.draw();\r\n        }\r\n\r\n        // player wins\r\n        if (this.state.current === 'win-player1') {\r\n            this.overlay.setBanner(this.config.settings.player1WinText);\r\n        }\r\n\r\n        if (this.state.current === 'win-player2') {\r\n            this.overlay.setBanner(this.config.settings.player2WinText);\r\n        }\r\n\r\n        // draw the next screen\r\n        this.requestFrame(() => this.play());\r\n    }\r\n\r\n    relaunchBall(side) {\r\n        // ignore if ball is launched\r\n        if (this.ball.launched) { return; }\r\n\r\n        // reset ball speed\r\n        this.ball.speed = parseInt(this.config.settings.ballSpeed);\r\n\r\n        // launch from right\r\n        if (side === 'right') {\r\n            this.ball.setY(this.player1.y + this.player1.height/4);\r\n            this.ball.launch(null, -1, this.player1.width);\r\n        }\r\n\r\n        // launch from left\r\n        if (side === 'left') {\r\n            this.ball.setY(this.player2.y);\r\n            this.ball.launch(null, 1, this.player2.width);\r\n        }\r\n\r\n    }\r\n\r\n    // event listeners\r\n    handleClicks(target) {\r\n        if (this.state.current === 'loading') { return; }\r\n\r\n        // mute\r\n        if (target.id === 'mute') {\r\n            this.mute();\r\n            return;\r\n        }\r\n\r\n        // pause\r\n        if (target.id === 'pause') {\r\n            this.pause();\r\n            return;\r\n        }\r\n\r\n        // button\r\n        if ( target.id === 'button') {\r\n            this.setState({ current: 'play' });\r\n            return;\r\n        }\r\n\r\n        // relaunch ball\r\n        let onSide = this.ball.launched === false && this.ball.x > this.screen.centerX;\r\n        if (this.state.current === 'play' && onSide) {\r\n            this.relaunchBall('right');\r\n        }\r\n\r\n        if (this.state.current.includes('win')) {\r\n            document.location.reload();\r\n        }\r\n    }\r\n\r\n    handleKeyboardInput(type, code) {\r\n        this.input.current = 'keyboard';\r\n\r\n        // player 1\r\n        if (type === 'keydown') {\r\n            if (code === 'ArrowUp') {\r\n                this.input.keyboard.up = true\r\n            }\r\n            if (code === 'ArrowDown') {\r\n                this.input.keyboard.down = true\r\n            }\r\n        }\r\n\r\n        if (type === 'keyup') {\r\n            if (code === 'ArrowUp') {\r\n                this.input.keyboard.up = false\r\n            }\r\n            if (code === 'ArrowDown') {\r\n                this.input.keyboard.down = false\r\n            }\r\n\r\n            // relaunch player 1\r\n            if (code === 'Space') {\r\n                let rightSide = this.ball.launched === false && this.ball.x > this.screen.centerX;\r\n                if (this.state.current === 'play' && rightSide) {\r\n                    this.relaunchBall('right')\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        // player 2\r\n        if (type === 'keydown') {\r\n            if (code === 'KeyW') {\r\n                this.input2.keyboard.up = true;\r\n            }\r\n            if (code === 'KeyS') {\r\n                this.input2.keyboard.down = true;\r\n            }\r\n\r\n            // relaunch player 2\r\n            if (code === 'ShiftLeft') {\r\n                let rightSide = this.ball.launched === false && this.ball.x > this.screen.centerX;\r\n                if (this.state.current === 'play' && !rightSide) {\r\n                    this.relaunchBall('left')\r\n                }\r\n            }\r\n        }\r\n\r\n        if (type === 'keyup') {\r\n            if (code === 'KeyW') {\r\n                this.input2.keyboard.up = false;\r\n            }\r\n            if (code === 'KeyS') {\r\n                this.input2.keyboard.down = false;\r\n            }\r\n\r\n        }\r\n\r\n        // game state\r\n\r\n        // switch to 2 player if W or S are pressed\r\n        if (type === 'keydown' && ['KeyW', 'KeyS'].includes(code) && !this.input2.active) {\r\n            this.input2.active = true;\r\n        }\r\n\r\n        // pause and play game if P is pressed\r\n        if (type === 'keydown' && code === 'KeyP') { this.pause(); }\r\n\r\n        // reload game after win and Spacebar pressed\r\n        if (type === 'keyup' && code === 'Space' && this.state.current.includes('win')) {\r\n            document.location.reload();\r\n        }\r\n    }\r\n\r\n    handleMouseMove(y) {\r\n        this.input.current = 'mouse';\r\n        this.input.mouse.y = y;\r\n    }\r\n\r\n    handleTouchMove(touch) {\r\n        let { clientY } = touch;\r\n\r\n        this.input.current = 'touch';\r\n        this.input.touch.y = clientY;\r\n    }\r\n\r\n    handleResize() {\r\n\r\n        document.location.reload();\r\n    }\r\n\r\n    // game helpers\r\n    // method:pause pause game\r\n    pause() {\r\n        if (this.state.current != 'play') { return; }\r\n\r\n        this.state.paused = !this.state.paused;\r\n        this.overlay.setPause(this.state.paused);\r\n\r\n        if (this.state.paused) {\r\n            // pause game loop\r\n            this.cancelFrame(this.frame.count - 1);\r\n\r\n            // mute all game sounds\r\n            this.audioCtx.suspend();\r\n\r\n            this.overlay.setBanner('Paused');\r\n        } else {\r\n            // resume game loop\r\n            this.requestFrame(() => this.play(), true);\r\n\r\n            // resume game sounds if game not muted\r\n            if (!this.state.muted) {\r\n                this.audioCtx.resume();\r\n            }\r\n\r\n            this.overlay.hide('banner');\r\n        }\r\n    }\r\n\r\n    // method:mute mute game\r\n    mute() {\r\n        let key = this.prefix.concat('muted');\r\n        localStorage.setItem(\r\n          key,\r\n          localStorage.getItem(key) === 'true' ? 'false' : 'true'\r\n        );\r\n        this.state.muted = localStorage.getItem(key) === 'true';\r\n\r\n        this.overlay.setMute(this.state.muted);\r\n\r\n        if (this.state.muted) {\r\n            // mute all game sounds\r\n            this.audioCtx.suspend();\r\n        } else {\r\n            // unmute all game sounds\r\n            if (!this.state.paused) {\r\n                this.audioCtx.resume();\r\n            }\r\n        }\r\n    }\r\n\r\n    playback(key, audioBuffer, options = {}) {\r\n        if (this.state.muted) { return; }\r\n        let id = Math.random().toString(16).slice(2);\r\n        this.playlist.push({\r\n            id: id,\r\n            key: key,\r\n            playback: audioPlayback(audioBuffer, {\r\n                ...{\r\n                    start: 0,\r\n                    end: audioBuffer.duration,\r\n                    context: this.audioCtx\r\n                },\r\n                ...options\r\n            }, () => {\r\n                // remove played sound from playlist\r\n                this.playlist = this.playlist\r\n                  .filter(s => s.id != id);\r\n            })\r\n        });\r\n    }\r\n\r\n    stopPlayback(key) {\r\n        this.playlist = this.playlist\r\n          .filter(s => {\r\n              let targetBuffer = s.key === key;\r\n              if (targetBuffer) {\r\n                  s.playback.pause();\r\n              }\r\n              return targetBuffer;\r\n          })\r\n    }\r\n\r\n    // reset game\r\n    reset() {\r\n        document.location.reload();\r\n    }\r\n\r\n    // update game state\r\n    setState(state) {\r\n        this.state = {\r\n            ...this.state,\r\n            ...{ prev: this.state.current },\r\n            ...state,\r\n        };\r\n    }\r\n\r\n    // request new frame\r\n    // wraps requestAnimationFrame.\r\n    // see game/helpers/animationframe.js for more information\r\n    requestFrame(next, resumed) {\r\n        let now = Date.now();\r\n        this.frame = {\r\n            count: requestAnimationFrame(next),\r\n            time: now,\r\n            rate: resumed ? 0 : now - this.frame.time,\r\n            scale: this.screen.scale * this.frame.rate * 0.01\r\n        };\r\n    }\r\n\r\n    // cancel frame\r\n    // wraps cancelAnimationFrame.\r\n    // see game/helpers/animationframe.js for more information\r\n    cancelFrame() {\r\n        cancelAnimationFrame(this.frame.count);\r\n    }\r\n}\r\n\r\nexport default Game;\r\n","/**\r\n * game/overlay.js\r\n * \r\n * What it Does:\r\n *   This file provides methods for showing and setting text, buttons, etc on the an html overlay of the game screen.\r\n *   \r\n *   show(<node string>):\r\n *   show is a helper that takes string matching the node to show\r\n *   eg. show('button')\r\n * \r\n *   hide(<node string>):\r\n *   hide is a helper that takes string matching the node to hide\r\n *   eg. hide('button')\r\n *   \r\n * What to Change:\r\n *   changes to the overlay are mage here, index.html, and style.css\r\n *   \r\n * How to Use it:\r\n *   write some html containing the \r\n *   pass a dom node into the Overlay constructor\r\n *   eg. const overlay = new Overlay(<overlay node>);\r\n * \r\n */\r\n\r\nclass Overlay {\r\n    constructor(node) {\r\n        this.root = node;\r\n\r\n        this.container = node.querySelector('.container');\r\n\r\n        this.loading = node.querySelector('#loading');\r\n        this.banner = node.querySelector('#banner');\r\n        this.button = node.querySelector('#button');\r\n\r\n        this.instructions = node.querySelector('#instructions');\r\n\r\n        this.score1 = node.querySelector('#score1');\r\n        this.score2 = node.querySelector('#score2');\r\n        this.mute = node.querySelector('#mute');\r\n        this.pause = node.querySelector('#pause');\r\n\r\n        this.styles = {};\r\n    }\r\n\r\n    setLoading() {\r\n        this.show('loading');\r\n    }\r\n\r\n    hideLoading() {\r\n        this.hide('loading');\r\n    }\r\n\r\n    setBanner(message) {\r\n        this.banner.textContent = message;\r\n        this.show('banner');\r\n    }\r\n\r\n    hideBanner() {\r\n        this.hide('banner');\r\n    }\r\n\r\n    setButton(message) {\r\n        this.button.style.fontFamily = this.styles.fontFamily;\r\n        // fix for safari\r\n        this.button.innerHTML = `<span id=\"buttonspan\">${message}</span>`;\r\n        this.show('button');\r\n    }\r\n\r\n    hideButton() {\r\n        this.hide('button');\r\n    }\r\n\r\n    setInstructions({ desktop, mobile }) {\r\n        if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {\r\n            // show mobile instructions\r\n\r\n            this.instructions.textContent = mobile;\r\n        } else {\r\n            // show desktop instructions\r\n\r\n            this.instructions.textContent = desktop;\r\n        }\r\n        this.show('instructions');\r\n    }\r\n\r\n    hideInstructions() {\r\n        this.hide('instructions');\r\n    }\r\n\r\n    showStats() {\r\n        this.show('score1');\r\n        this.show('score2');\r\n    }\r\n\r\n    setScore1(score) {\r\n        this.score1.textContent = `P1: ${score}`;\r\n    }\r\n\r\n    setScore2(score) {\r\n        this.score2.textContent = `P2: ${score}`;\r\n    }\r\n\r\n    setStyles(styles) {\r\n        this.styles = { ...this.styles, ...styles };\r\n        this.applyStyles();\r\n    }\r\n\r\n    applyStyles() {\r\n        this.container.style.color = this.styles.textColor;\r\n        this.container.style.fontFamily = this.styles.fontFamily;\r\n\r\n        this.button.style.backgroundColor = this.styles.primaryColor;\r\n    }\r\n\r\n    setMute(muted) {\r\n        this.mute.textContent = muted ? 'volume_off' : 'volume_up';\r\n        this.show('mute');\r\n    }\r\n\r\n    setPause(paused) {\r\n        this.pause.textContent = paused ? 'play_arrow' : 'pause';\r\n        this.show('pause');\r\n    }\r\n\r\n    show(node) {\r\n        this[node].active = true;\r\n        this[node].style.visibility = 'visible';\r\n        this[node].style.opacity = 1;\r\n    }\r\n\r\n    hide(node) {\r\n        this[node].active = false;\r\n        this[node].style.opacity = 0;\r\n        this[node].style.visibility = 'hidden';\r\n    }\r\n}\r\n\r\nexport default Overlay;","/**\r\n * index.js\r\n * \r\n * What it Does:\r\n *   This file gets the #gameScreen and #gameOverlay elements in index.html,\r\n *   attaches a new game and a overlay to them, and starts the game.\r\n *   It also loads the .internals/config.json which is a bundle of current customization\r\n *   to the json files in the .koji directory\r\n * \r\n * How to Use:\r\n *   Make sure this file has a script tag in index.html\r\n *   eg. <script src=\"./index.js\"></script>\r\n */\r\n\r\n// import Game and Overlay\r\nimport Game from './game/main.js';\r\nimport Overlay from './game/overlay.js';\r\n\r\n// import Koji\r\nimport Koji from 'koji-tools';\r\nKoji.pageLoad();\r\n\r\n// create get the gameScreen and gameOverlay elements\r\n// gameScreen is the <canvas> element where the game is displayed\r\n// gameOverlay is where the where start button, score, lives,\r\n// play and pause buttons etc will be displayed\r\nconst gameScreen = document.getElementById(\"gameScreen\");\r\nconst gameOverlay = document.getElementById(\"gameOverlay\");\r\nconst topbar = document.getElementById(\"topBar\");\r\n\r\n// create new overlay for game\r\n// create new game and load it\r\nconst config = Koji.config;\r\nconst overlay = new Overlay(gameOverlay)\r\nconst game = new Game(gameScreen, overlay, topbar, config);\r\ngame.load();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}